<div class="page-header">
  <%= link_to new_washer_path, class: 'btn btn-primary' do %>
  <span class="glyphicon glyphicon-plus"></span>
  New Washer
  <% end %>
  <h1>Listing washers</h1>
</div>
<% if user_signed_in?  %>
  
<ul class="unavailable_washers list-group bg-info">
<h1>My Machines</h1>
<%= current_user %>

<%= render partial: "washerLink", collection: current_user.washers.decorate, as: :washer %>
</ul>
<ul class="available_washers list-group bg-info">
<h1>Available Machines</h1>
<%= render partial: "washerLink", collection:(@washers.available_machines.decorate - current_user.washers.decorate), as: :washer %>
</ul> 
<% end %>

<ul class="available_washers list-group bg-info">
<h1>Available Machines</h1>
<%= render partial: "washerLink", collection:@washers.available_machines.decorate, as: :washer %>


 <!-- (@washers.available_machines - current_user.washers).decorate -->
  

  <%# washer.washer_list_item %>
     
<%# if washer.state == 'empty' %>
  <%#= form_for washer,  url: fill_washer_path(washer)  do |f| %>
<%#= select_tag(:load, options_from_collection_for_select(Load.all, "id", "weight"), id: "washer#{washer.id}Load") %>
    <%#= f.submit %>

<%# end%>
<%# end %>

<%#= simple_form_for washer.becomes(Washer), 
  #url: fill_washer_path(washer, Load.find(params[:load])),
    
    :action => 'fill',
    :method => 'patch' do |f| %>

    <%#= f.input(:load, collection: Load.all, label_method: :weight, value_method: :id) %>
<%#= f.hidden_field :load_id, :value => load.id %>
  <%#= f.button :submit %>
<%# end %>
   <%# end %>
  <%#= render partial: "washer", collection: @washers, as: :washer %>
</ul>
<ul class="unavailable_washers list-group bg-info">
<h1>Unavailable Machines</h1>

<%= render partial: "washerLink", collection: @washers.unavailable_machines.decorate, as: :washer %>
</ul>
<div class="table-responsive">
  <table class="table table-striped table-bordered table-hover">
    <thead>
      <tr>
        <th>Name</th>
        <th>Position</th>
        <th>Type</th>
        <th>State</th>
        <th>User</th>
        <th></th>
        <th></th>
        <th></th>
      </tr>
    </thead>
    <tbody>
      <%= content_tag_for(:tr, @washers) do |washer| %>
      <td><%= washer.name %></td>
      <td><%= washer.position %></td>
      <td><%= washer.type %></td>
      <td><%= washer.state %></td>
      <td><%= washer.user %></td>
      <td><%= link_to 'Show', washer %></td>
      <td><%= link_to 'Edit', edit_washer_path(washer) %></td>
      <td><%= link_to 'Destroy', washer, method: :delete, data: { confirm: 'Are you sure?' } %></td>
      <% end %>
    </tbody>
  </table>
</div>